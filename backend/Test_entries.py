# from memory import ChromaMemory
from langchain_core.messages import SystemMessage, HumanMessage,AIMessage,ToolMessage


# if __name__ == "__main__":
#     memory = ChromaMemory()
#     memory.print_all_entries("Fire_forest_GPT")
response= [{'messages': [HumanMessage(content='What is the effect of forest fire on mushroom growth', additional_kwargs={}, response_metadata={}, id='3376457a-b83e-436f-b450-7e2467dd4883')]}, {'messages': [HumanMessage(content='What is the effect of forest fire on mushroom growth', additional_kwargs={}, response_metadata={}, id='3376457a-b83e-436f-b450-7e2467dd4883'), AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'call_h2EW3fodhMQwv28nz59l1yBc', 'function': {'arguments': '{"query":"effects of forest fire on mushroom growth"}', 'name': 'mushroom_growth_after_fire'}, 'type': 'function'}], 'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 25, 'prompt_tokens': 297, 'total_tokens': 322, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-mini-2024-07-18', 'system_fingerprint': 'fp_b376dfbbd5', 'id': 'chatcmpl-BK3dIbAblW1RLV0NA5PzdqH4iCdmY', 'finish_reason': 'tool_calls', 'logprobs': None}, id='run-59c1a155-72e9-4e5e-9463-e541506a2ca3-0', tool_calls=[{'name': 'mushroom_growth_after_fire', 'args': {'query': 'effects of forest fire on mushroom growth'}, 'id': 'call_h2EW3fodhMQwv28nz59l1yBc', 'type': 'tool_call'}], usage_metadata={'input_tokens': 297, 'output_tokens': 25, 'total_tokens': 322, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}, {'messages': [HumanMessage(content='What is the effect of forest fire on mushroom growth', additional_kwargs={}, response_metadata={}, id='3376457a-b83e-436f-b450-7e2467dd4883'), AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'call_h2EW3fodhMQwv28nz59l1yBc', 'function': {'arguments': '{"query":"effects of forest fire on mushroom growth"}', 'name': 'mushroom_growth_after_fire'}, 'type': 'function'}], 'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 25, 'prompt_tokens': 297, 'total_tokens': 322, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-mini-2024-07-18', 'system_fingerprint': 'fp_b376dfbbd5', 'id': 'chatcmpl-BK3dIbAblW1RLV0NA5PzdqH4iCdmY', 'finish_reason': 'tool_calls', 'logprobs': None}, id='run-59c1a155-72e9-4e5e-9463-e541506a2ca3-0', tool_calls=[{'name': 'mushroom_growth_after_fire', 'args': {'query': 'effects of forest fire on mushroom growth'}, 'id': 'call_h2EW3fodhMQwv28nz59l1yBc', 'type': 'tool_call'}], usage_metadata={'input_tokens': 297, 'output_tokens': 25, 'total_tokens': 322, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}}), ToolMessage(content='Forest fires can significantly influence mushroom growth, leading to both beneficial and detrimental effects depending on various factors such as the severity of the fire and the types of mushrooms involved. Here’s a comprehensive overview:\n\n### Positive Effects\n\n1. **Nutrient Release**: \n   - Fires consume organic matter, releasing nutrients like nitrogen into the soil, which can promote the growth of mushrooms that thrive on rich nutrients.\n\n2. **Improved Soil Conditions**:\n   - The intense heat can alter soil structure and increase temperatures, creating conditions favorable for the germination of fungal spores.\n\n3. **Light Penetration**:\n   - Fires clear dense vegetation, allowing more sunlight to reach the forest floor. This increased light can benefit mushroom species that prefer more open environments.\n\n4. **Fire-Following Fungi**:\n   - Certain species, known as fire-adapted or fire-following fungi (like morels and saffron milk caps), often fruit abundantly in the aftermath of a fire due to the favorable conditions created.\n\n### Negative Effects\n\n1. **Soil Sterilization**:\n   - High-intensity fires may sterilize the soil and damage mycorrhizal networks essential for many mushroom species, which can hinder their recovery and growth.\n\n2. **Alteration of Ecosystems**:\n   - Fires can disrupt existing plant communities, allowing invasive species to proliferate, which may outcompete native fungi for resources.\n\n3. **Long-Term Recovery**: \n   - In areas severely affected by high-intensity fires, the recovery of fungal communities can be slow, impacting the overall biodiversity and ecosystem health.\n\n### Ecological Role\n- The role of fungi in decomposing organic matter after fires is crucial for soil health and structure, assisting in the recovery of the ecosystem and enhancing biodiversity.\n\n### Conclusion\nIn summary, forest fires have a complex and dual impact on mushroom growth. While they can create favorable conditions for certain mushroom species, particularly fire-followers, high-intensity fires can also pose significant challenges to fungal recovery and the overall ecological balance. Understanding these dynamics is key for managing forest ecosystems and practices like foraging.', name='mushroom_growth_after_fire', id='4fab85a3-7430-4ccf-84f5-d15ab60faff4', tool_call_id='call_h2EW3fodhMQwv28nz59l1yBc')]}, {'messages': [HumanMessage(content='What is the effect of forest fire on mushroom growth', additional_kwargs={}, response_metadata={}, id='3376457a-b83e-436f-b450-7e2467dd4883'), AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'call_h2EW3fodhMQwv28nz59l1yBc', 'function': {'arguments': '{"query":"effects of forest fire on mushroom growth"}', 'name': 'mushroom_growth_after_fire'}, 'type': 'function'}], 'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 25, 'prompt_tokens': 297, 'total_tokens': 322, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-mini-2024-07-18', 'system_fingerprint': 'fp_b376dfbbd5', 'id': 'chatcmpl-BK3dIbAblW1RLV0NA5PzdqH4iCdmY', 'finish_reason': 'tool_calls', 'logprobs': None}, id='run-59c1a155-72e9-4e5e-9463-e541506a2ca3-0', tool_calls=[{'name': 'mushroom_growth_after_fire', 'args': {'query': 'effects of forest fire on mushroom growth'}, 'id': 'call_h2EW3fodhMQwv28nz59l1yBc', 'type': 'tool_call'}], usage_metadata={'input_tokens': 297, 'output_tokens': 25, 'total_tokens': 322, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}}), ToolMessage(content='Forest fires can significantly influence mushroom growth, leading to both beneficial and detrimental effects depending on various factors such as the severity of the fire and the types of mushrooms involved. Here’s a comprehensive overview:\n\n### Positive Effects\n\n1. **Nutrient Release**: \n   - Fires consume organic matter, releasing nutrients like nitrogen into the soil, which can promote the growth of mushrooms that thrive on rich nutrients.\n\n2. **Improved Soil Conditions**:\n   - The intense heat can alter soil structure and increase temperatures, creating conditions favorable for the germination of fungal spores.\n\n3. **Light Penetration**:\n   - Fires clear dense vegetation, allowing more sunlight to reach the forest floor. This increased light can benefit mushroom species that prefer more open environments.\n\n4. **Fire-Following Fungi**:\n   - Certain species, known as fire-adapted or fire-following fungi (like morels and saffron milk caps), often fruit abundantly in the aftermath of a fire due to the favorable conditions created.\n\n### Negative Effects\n\n1. **Soil Sterilization**:\n   - High-intensity fires may sterilize the soil and damage mycorrhizal networks essential for many mushroom species, which can hinder their recovery and growth.\n\n2. **Alteration of Ecosystems**:\n   - Fires can disrupt existing plant communities, allowing invasive species to proliferate, which may outcompete native fungi for resources.\n\n3. **Long-Term Recovery**: \n   - In areas severely affected by high-intensity fires, the recovery of fungal communities can be slow, impacting the overall biodiversity and ecosystem health.\n\n### Ecological Role\n- The role of fungi in decomposing organic matter after fires is crucial for soil health and structure, assisting in the recovery of the ecosystem and enhancing biodiversity.\n\n### Conclusion\nIn summary, forest fires have a complex and dual impact on mushroom growth. While they can create favorable conditions for certain mushroom species, particularly fire-followers, high-intensity fires can also pose significant challenges to fungal recovery and the overall ecological balance. Understanding these dynamics is key for managing forest ecosystems and practices like foraging.', name='mushroom_growth_after_fire', id='4fab85a3-7430-4ccf-84f5-d15ab60faff4', tool_call_id='call_h2EW3fodhMQwv28nz59l1yBc'), AIMessage(content='Forest fires can significantly affect mushroom growth, exhibiting both positive and negative impacts depending on factors like fire severity and mushroom species involved. \n\n### Positive Effects:\n1. **Nutrient Release**: Fires break down organic matter, enhancing soil nutrient levels, particularly nitrogen, which benefits mushroom growth.\n2. **Improved Soil Conditions**: Heat from the fire can enhance soil structure and temperature, aiding the germination of fungal spores.\n3. **Light Penetration**: Fires clear dense vegetation, allowing sunlight to reach the forest floor, which can be advantageous for mushrooms preferring open environments.\n4. **Fire-Following Fungi**: Some mushrooms, such as morels, thrive in post-fire conditions, flourishing due to favorable ecosystem changes.\n\n### Negative Effects:\n1. **Soil Sterilization**: High-intensity fires can sterilize the soil and damage mycorrhizal networks vital for many fungi.\n2. **Ecosystem Alteration**: The disruption of plant communities may permit invasive species to thrive, which can outcompete native fungi.\n3. **Long-Term Recovery**: Recovery of fungal populations in areas impacted by severe fires can be prolonged, affecting biodiversity.\n\nIn summary, while forest fires can create beneficial conditions for certain mushrooms, they can also pose significant challenges to others and disrupt the ecological balance. Understanding these effects is crucial for effective forest management and foraging practices.', additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 286, 'prompt_tokens': 763, 'total_tokens': 1049, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-mini-2024-07-18', 'system_fingerprint': 'fp_b376dfbbd5', 'id': 'chatcmpl-BK3dWaHZcRat17L7qDjEc64AQq6Vb', 'finish_reason': 'stop', 'logprobs': None}, id='run-c93570cb-2318-4748-ac67-8d176659f640-0', usage_metadata={'input_tokens': 763, 'output_tokens': 286, 'total_tokens': 1049, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}]

def unique_entries(data):
    seen = set()
    unique_data = []

    for entry in data:
        # Check if the message ID is already seen
        if (entry["messages"][0]).id not in seen:
            seen.add((entry["messages"][0]).id)
            unique_data.append(entry)
    return unique_data
# for message in response[-1]["messages"]:
#     print(message)

data = response[-1]["messages"]
tools = []

for message in data:
    if isinstance(message, ToolMessage):
        tools.append(message)


print(f"Found {len(tools)} tool messagse")
print(tools[0].content)
print(tools[0].name)
# Example: print contents


# unique_data=unique_entries(response[-1])
# Print the filtered result
# print(unique_data)
